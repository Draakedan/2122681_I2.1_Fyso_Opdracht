@model DatabaseHandler.Models.PatientFile
@{
    ViewData["Title"] = $"{Model.patient.Name} Dossier";
}

<div class="container">
    <a class="btn btn-primary" href="@Url.Action("UpdatePatient", "Home", new { id = Model.ID})">Update Patient</a>
    <a class="btn btn-primary" href="@Url.Action("UpdateDossier", "Home", new { id = Model.ID })">Update dossier</a>
    <div class="row">
        <div class="col-md-6">
            <p>@Model.patient.Name foto</p>
        </div>
        <div class="col-md-6">
            <h4>@Model.patientID</h4>
            <p>Naam: @Model.patient.Name</p>
            <p>Leeftijd: @Model.patient.Age</p>
            <p>Geslacht: @Model.patient.SetGenderString()</p>
            <p>Email: @Model.patient.Email</p>
            <p>Tel: @Model.patient.PhoneNumber</p>
            <p>Datum Aanmelding: @Model.registerDate.ToShortDateString()</p>
            <p>Datum Ontslag: @Model.getShortFireDateString()</p>
        </div>
    </div>

    <div class="border-top border-info">
        <h4>Diagnose:</h4>
        <p>@Model.diagnoseCode: @Model.diagnoseCodeComment</p>

        <h4>Klachten:</h4>
        <p>@Model.issueDescription</p>

        <h4>Hoofdbehandelaar:</h4>
        <p>@Model.mainTherapist.Name</p>

    </div>

    
    <div class="mt-3 mb-2">
        <h4>Afspraken</h4>
        @if (Model.sessions.Count == 0)
        {
            <p>Er zijn nog geen afsprken gemaakt...</p>
        }
        else if (Model.sessions.Count < 3)
            foreach (TherapySession s in Model.sessions)
            {
                <partial name="_SessionListPartial" model="new SessionItemData(false, s, true, false)" />
            }
        else
            for (int i = 0; i < 3; i++)
            {
                <partial name="_SessionListPartial" model="new SessionItemData(false, Model.sessions.ElementAt(i), true, false)" />
            }
    </div>
    <a class="btn btn-info" href="@Url.Action("Sessions", "Home", new { id = Model.ID})">Bekijk alle afspraken</a>
    <a class="btn btn-info" href="@Url.Action("NewSession", "Home", new {dossier = Model.ID})">Maak nieuwe afspraak</a>

    <div class="mt-3 mb-2">
        <h4>Commentaar</h4>
        @if (Model.comments.Count == 0)
        {
            <p>Er zijn nog geen comments geplaatst...</p>
        }
        else if (Model.comments.Count < 3)
            foreach (Comment c in Model.comments)
            {
                <partial name="_CommentListPartial" model="c" />
            }
        else
            for (int i = 0; i < 3; i++)
            {
                <partial name="_CommentListPartial" model="Model.comments.ElementAt(i)" />
            }
    </div>
    <a class="btn btn-info" href="@Url.Action("Comments", "Home", new { id = Model.ID})">Bekijk alle comments</a>
    <a class="btn btn-info" href="@Url.Action("NewComment", "Home", new { id = Model.ID})">Maak nieuwe comment</a>

    <div class="border border-info mt-3 p-1">
        <h4>Intake info</h4>
        <p>Intake is gedaan door: @Model.intakeDoneBy.Name</p>
        <p>Intake onder toezicht van: @Model.getIntakeSuppervisorName()</p>
    </div>

</div>
